# üîë –ö–õ–Æ–ß–ï–í–´–ï –ß–ê–°–¢–ò –ö–û–î–ê - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–ª—è –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è

## üìç –ì–¥–µ –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ö–æ–¥

---

## 1Ô∏è‚É£ COOKIE –ò SESSION CONFIGURATION
**–§–∞–π–ª:** [server.js](server.js) **—Å—Ç—Ä–æ–∫–∏ 18-43**

### –ö–æ–¥:
```javascript
// Session configuration 
app.use(session({
  secret: process.env.SESSION_SECRET || 'your-secret-key-change-in-production',
  resave: false,
  saveUninitialized: false,
  store: MongoStore.create({
    mongoUrl: process.env.MONGO_URI || 'mongodb://localhost:27017',
    dbName: 'assignment3',
    collectionName: 'sessions',
    ttl: 24 * 60 * 60 // 24 hours
  }),
  cookie: {
    httpOnly: true,        // ‚Üê –ó–ê–©–ò–¢–ê –û–¢ XSS
    secure: isProduction ? 'auto' : false,  // ‚Üê –ó–ê–©–ò–¢–ê –û–¢ MITM
    maxAge: 24 * 60 * 60 * 1000,            // ‚Üê 24 –ß–ê–°–ê
    sameSite: isProduction ? 'auto' : 'lax' // ‚Üê –ó–ê–©–ò–¢–ê –û–¢ CSRF
  },
  name: 'sessionId'  // ‚Üê –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∏–º—è 'connect.sid'
}));
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è:

**1. `secret`** - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ session ID
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –ø–æ–¥–ø–∏—Å–∏ cookie
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥–¥–µ–ª–∫—É session ID
   - –•—Ä–∞–Ω–∏—Ç—Å—è –≤ .env —Ñ–∞–π–ª–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**2. `resave: false`** - –Ω–µ –ø–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–µ—Å—Å–∏—é –µ—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –£–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ MongoDB

**3. `saveUninitialized: false`** - –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Å—Å–∏—é –¥–ª—è –Ω–µ–∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã—Ö
   - –≠–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞ –≤ –ë–î
   - GDPR compliance (–Ω–µ —Ö—Ä–∞–Ω–∏–º –¥–∞–Ω–Ω—ã–µ –¥–æ —Å–æ–≥–ª–∞—Å–∏—è)

**4. `store: MongoStore`** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –≤ MongoDB
   - –°–µ—Å—Å–∏–∏ –ø–µ—Ä–µ–∂–∏–≤–∞—é—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
   - –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ ‚Üí –æ–¥–Ω–∞ –ë–î)
   - TTL 24 —á–∞—Å–∞ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π

**5. `cookie.httpOnly: true`** - **–ö–õ–Æ–ß–ï–í–ê–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨!**
   - JavaScript –ù–ï –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ cookie
   - `document.cookie` –≤–µ—Ä–Ω–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
   - –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫ (cross-site scripting)
   - –î–∞–∂–µ –µ—Å–ª–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –≤–Ω–µ–¥—Ä–∏—Ç JS, –æ–Ω –Ω–µ —É–∫—Ä–∞–¥–µ—Ç session ID

**6. `cookie.secure`** - —Ç–æ–ª—å–∫–æ HTTPS –≤ production
   - –í production: cookie –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ HTTPS
   - –í development: false (–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ HTTP)
   - –ó–∞—â–∏—Ç–∞ –æ—Ç MITM –∞—Ç–∞–∫ (man-in-the-middle)

**7. `cookie.sameSite`** - –∑–∞—â–∏—Ç–∞ –æ—Ç CSRF
   - Cookie –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ cross-site –∑–∞–ø—Ä–æ—Å—ã
   - –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF –∞—Ç–∞–∫ (cross-site request forgery)
   - 'lax' –≤ dev, 'auto' –≤ production

**8. `name: 'sessionId'`** - –∫–∞—Å—Ç–æ–º–Ω–æ–µ –∏–º—è
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ 'connect.sid'
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ obscurity

---

## 2Ô∏è‚É£ AUTHENTICATION MIDDLEWARE (isAuthenticated)
**–§–∞–π–ª:** [server.js](server.js) **—Å—Ç—Ä–æ–∫–∏ 48-70**

### –ö–æ–¥:
```javascript
function isAuthenticated(req, res, next) {
  if (req.session && req.session.user) {
    return next();  // ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
  }
  
  // –î–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º JSON
  if (req.path.startsWith('/api/')) {
    return res.status(401).json({ 
      error: 'Authentication required',
      message: 'Please log in to perform this action'
    });
  }
  
  // –î–ª—è –æ–±—ã—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –ª–æ–≥–∏–Ω
  res.redirect('/admin?error=Please login first');
}
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- `req.session` - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Å–µ—Å—Å–∏—è
- `req.session.user` - –µ—Å—Ç—å –ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ —Å–µ—Å—Å–∏–∏

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Express-session –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç cookie 'sessionId'
2. –ï—Å–ª–∏ cookie –≤–∞–ª–∏–¥–µ–Ω ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ MongoDB –≤ req.session
3. –ï—Å–ª–∏ req.session.user —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω
4. –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 (Unauthorized)

**–ó–∞—á–µ–º –¥–≤–∞ —Ç–∏–ø–∞ –æ—Ç–≤–µ—Ç–∞:**
- API endpoints ‚Üí JSON (–¥–ª—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤)
- HTML pages ‚Üí redirect (–¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞)

---

## 3Ô∏è‚É£ AUTHORIZATION MIDDLEWARE (isAdmin)
**–§–∞–π–ª:** [server.js](server.js) **—Å—Ç—Ä–æ–∫–∏ 72-85**

### –ö–æ–¥:
```javascript
function isAdmin(req, res, next) {
  if (req.session && req.session.user && req.session.user.role === 'admin') {
    return next();  // ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
  }
  
  if (req.path.startsWith('/api/')) {
    return res.status(403).json({ 
      error: 'Forbidden',
      message: 'Admin privileges required'
    });
  }
  
  res.status(403).send('Access denied: Admin privileges required');
}
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

**–†–∞–∑–Ω–∏—Ü–∞ —Å isAuthenticated:**
- `isAuthenticated` ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ö–¢–û –≤—ã (–∑–∞–ª–æ–≥–∏–Ω–µ–Ω –ª–∏)
- `isAdmin` ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ß–¢–û –≤—ã –º–æ–∂–µ—Ç–µ (–µ—Å—Ç—å –ª–∏ –ø—Ä–∞–≤–∞)

**HTTP —Å—Ç–∞—Ç—É—Å—ã:**
- 401 Unauthorized ‚Üí –Ω—É–∂–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω)
- 403 Forbidden ‚Üí –µ—Å—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –Ω–æ –Ω–µ—Ç –ø—Ä–∞–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```javascript
app.post('/api/bookings', isAuthenticated, ...);  // –õ—é–±–æ–π –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã–π
app.put('/api/bookings/:id', isAdmin, ...);       // –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω
app.delete('/api/bookings/:id', isAdmin, ...);    // –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω
```

---

## 4Ô∏è‚É£ BCRYPT - –°–û–ó–î–ê–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
**–§–∞–π–ª:** [init-users.js](init-users.js) **—Å—Ç—Ä–æ–∫–∏ 24-34**

### –ö–æ–¥:
```javascript
// Creating admin user
const adminPassword = await bcrypt.hash(
  process.env.ADMIN_PASSWORD || 'admin123',  // ‚Üê –ò—Å—Ö–æ–¥–Ω—ã–π –ø–∞—Ä–æ–ª—å
  10  // ‚Üê –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤ (2^10 = 1024 –∏—Ç–µ—Ä–∞—Ü–∏–π)
);

await usersCollection.insertOne({
  username: process.env.ADMIN_USERNAME || 'admin',
  password: adminPassword,  // ‚Üê –°–æ—Ö—Ä–∞–Ω—è–µ–º –•–ï–®, –ù–ï –ø–∞—Ä–æ–ª—å!
  role: 'admin',
  email: 'admin@comforthoetel.com',
  fullName: 'Administrator',
  created_at: new Date()
});
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç bcrypt.hash():**
1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é —Å–æ–ª—å (salt) - —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–æ–ª—è
2. –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å + —Å–æ–ª—å
3. –•–µ—à–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ Blowfish –∞–ª–≥–æ—Ä–∏—Ç–º
4. –ü–æ–≤—Ç–æ—Ä—è–µ—Ç 2^10 —Ä–∞–∑ (1024 –∏—Ç–µ—Ä–∞—Ü–∏–∏)
5. –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞ `$2b$10$N9qo8uLO...` (60 —Å–∏–º–≤–æ–ª–æ–≤)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö–µ—à–∞:**
```
$2b$10$N9qo8uLOXVOAkOdCfOYNueshI3SL0SqEhZzMNBxvl.hN2RBhqMfai
 ‚îÇ  ‚îÇ   ‚îÇ                              ‚îÇ
 ‚îÇ  ‚îÇ   ‚îî‚îÄ Salt (22 —Å–∏–º–≤–æ–ª–∞)           ‚îî‚îÄ Hash (31 —Å–∏–º–≤–æ–ª)
 ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Rounds (10 = 2^10 –∏—Ç–µ—Ä–∞—Ü–∏–π)
 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ê–ª–≥–æ—Ä–∏—Ç–º (2b = bcrypt)
```

**–ü–æ—á–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ:**
- **–ù–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å:** –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å 'admin123' –∏–∑ —Ö–µ—à–∞
- **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ–ª–∏:** –¥–∞–∂–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏ ‚Üí —Ä–∞–∑–Ω—ã–µ —Ö–µ—à–∏
- **–ú–µ–¥–ª–µ–Ω–Ω–æ—Å—Ç—å:** 1024 –∏—Ç–µ—Ä–∞—Ü–∏–∏ –¥–µ–ª–∞—é—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å –Ω–µ–ø—Ä–∞–∫—Ç–∏—á–Ω—ã–º
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:** –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å rounds –∫–æ–≥–¥–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã —Å—Ç–∞–Ω—É—Ç –±—ã—Å—Ç—Ä–µ–µ

---

## 5Ô∏è‚É£ BCRYPT - –ü–†–û–í–ï–†–ö–ê –ü–ê–†–û–õ–Ø –ü–†–ò –õ–û–ì–ò–ù–ï
**–§–∞–π–ª:** [server.js](server.js) **—Å—Ç—Ä–æ–∫–∏ 238-244**

### –ö–æ–¥:
```javascript
// 1. –ù–∞—Ö–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
const user = await db.collection('users').findOne({ username });

if (!user) {
  return res.status(401).json({ error: 'Invalid credentials' });
}

// 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ bcrypt
const passwordMatch = await bcrypt.compare(
  password,        // ‚Üê –û—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (plain text): "admin123"
  user.password    // ‚Üê –ò–∑ –ë–î (hash): "$2b$10$N9qo..."
);

if (!passwordMatch) {
  return res.status(401).json({ error: 'Invalid credentials' });
}
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç bcrypt.compare():**
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å–æ–ª—å –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ö–µ—à–∞
2. –•–µ—à–∏—Ä—É–µ—Ç –≤–≤–µ–¥–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å —Å —ç—Ç–æ–π –∂–µ —Å–æ–ª—å—é
3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ö–µ—à —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` –µ—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç, `false` –µ—Å–ª–∏ –Ω–µ—Ç

**–ü—Ä–∏–º–µ—Ä:**
```javascript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π hash
const storedHash = "$2b$10$N9qo8uLOXVOA...";

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç
const inputPassword = "admin123";

// bcrypt.compare –¥–µ–ª–∞–µ—Ç:
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç salt: "N9qo8uLOXVOA"
2. –•–µ—à–∏—Ä—É–µ—Ç: hash("admin123" + salt, 10 rounds)
3. –ü–æ–ª—É—á–∞–µ—Ç: "$2b$10$N9qo8uLOXVOA..."
4. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç: stored === computed ‚Üí true ‚úÖ
```

**–ü–æ—á–µ–º—É generic error message:**
```javascript
// ‚ùå –ü–õ–û–•–û - —Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
if (!user) return res.json({ error: 'User not found' });
if (!passwordMatch) return res.json({ error: 'Wrong password' });

// ‚úÖ –•–û–†–û–®–û - –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
if (!user || !passwordMatch) {
  return res.status(401).json({ error: 'Invalid credentials' });
}
```
–ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –Ω–µ —É–∑–Ω–∞–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å.

---

## 6Ô∏è‚É£ –°–û–ó–î–ê–ù–ò–ï –°–ï–°–°–ò–ò –ü–û–°–õ–ï –õ–û–ì–ò–ù–ê
**–§–∞–π–ª:** [server.js](server.js) **—Å—Ç—Ä–æ–∫–∏ 245-265**

### –ö–æ–¥:
```javascript
// –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Å–µ—Å—Å–∏–∏
req.session.user = {
  id: user._id.toString(),
  username: user.username,
  role: user.role,
  email: user.email,
  fullName: user.fullName
  // ‚ö†Ô∏è –ù–ï –°–û–•–†–ê–ù–Ø–ï–ú PASSWORD!
};

// –Ø–≤–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å–µ—Å—Å–∏—é –≤ MongoDB
req.session.save((err) => {
  if (err) {
    console.error('Session save error:', err);
    return res.status(500).json({ error: 'Session error' });
  }
  
  res.status(200).json({ 
    success: true, 
    message: 'Admin login successful',
    user: {
      username: user.username,
      role: user.role,
      fullName: user.fullName
    }
  });
});
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç `req.session.user` —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. `req.session.save()` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ MongoDB (–∫–æ–ª–ª–µ–∫—Ü–∏—è 'sessions')
3. Express-session –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π session ID
4. Session ID –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É –≤ HttpOnly cookie
5. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç JSON —Å —É—Å–ø–µ—Ö–æ–º

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ MongoDB:**
```javascript
{
  _id: "vF3k9mL2pQ1...",  // ‚Üê Session ID (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ cookie)
  expires: ISODate("2026-02-06T12:00:00Z"),
  session: {
    cookie: { 
      httpOnly: true, 
      secure: false, 
      maxAge: 86400000 
    },
    user: {
      id: "65abc123...",
      username: "admin",
      role: "admin",
      email: "admin@comforthoetel.com",
      fullName: "Administrator"
    }
  }
}
```

**–í–∞–∂–Ω–æ:**
- –ü–∞—Ä–æ–ª—å –ù–ï —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–µ—Å—Å–∏–∏ (—Ç–æ–ª—å–∫–æ –≤ users –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ)
- Session ID –¥–ª–∏–Ω–Ω–∞—è —Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–≥–∞–¥–∞—Ç—å)
- TTL –≤ MongoDB –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞

---

## 7Ô∏è‚É£ LOGOUT - –£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï –°–ï–°–°–ò–ò
**–§–∞–π–ª:** [server.js](server.js) **—Å—Ç—Ä–æ–∫–∏ 341-350**

### –ö–æ–¥:
```javascript
app.post('/admin/logout', (req, res) => {
  req.session.destroy((err) => {
    if (err) {
      console.error('Logout error:', err);
      return res.status(500).json({ error: 'Logout failed' });
    }
    
    // –£–¥–∞–ª—è–µ–º cookie –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
    res.clearCookie('sessionId');
    
    res.status(200).json({ 
      success: true, 
      message: 'Logged out successfully' 
    });
  });
});
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `req.session.destroy()`:**
1. –£–¥–∞–ª—è–µ—Ç —Å–µ—Å—Å–∏—é –∏–∑ MongoDB (–ø–æ session ID)
2. –û—á–∏—â–∞–µ—Ç `req.session` –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏
3. Session ID —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `res.clearCookie('sessionId')`:**
1. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É –∫–æ–º–∞–Ω–¥—É —É–¥–∞–ª–∏—Ç—å cookie
2. Set-Cookie: sessionId=; Max-Age=0; Path=/; Expires=Thu, 01 Jan 1970
3. –ë—Ä–∞—É–∑–µ—Ä —É–¥–∞–ª—è–µ—Ç cookie

**–ü–æ—Å–ª–µ logout:**
- Cookie —É–¥–∞–ª–µ–Ω –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- –°–µ—Å—Å–∏—è —É–¥–∞–ª–µ–Ω–∞ –∏–∑ MongoDB
- –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å ‚Üí 401 Unauthorized

---

## 8Ô∏è‚É£ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–í–ï–†–ö–ê –°–ï–°–°–ò–ò

### –ü–æ—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–∞:

```
1. –ë—Ä–∞—É–∑–µ—Ä –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
   GET /api/bookings
   Cookie: sessionId=vF3k9mL2pQ1...
   
2. Express-session middleware –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç
   - –ß–∏—Ç–∞–µ—Ç session ID –∏–∑ cookie
   - –ò—â–µ—Ç –≤ MongoDB –ø–æ —ç—Ç–æ–º—É ID
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ req.session
   
3. –ù–∞—à middleware isAuthenticated –ø—Ä–æ–≤–µ—Ä—è–µ—Ç
   if (req.session && req.session.user) { ... }
   
4. –ï—Å–ª–∏ OK ‚Üí next() ‚Üí –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–∞—Ä—à—Ä—É—Ç–∞
   –ï—Å–ª–∏ NOT OK ‚Üí 401 error
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Browser  ‚îÇ                  ‚îÇ  Server  ‚îÇ                 ‚îÇ MongoDB  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                             ‚îÇ                            ‚îÇ
     ‚îÇ POST /admin/login           ‚îÇ                            ‚îÇ
     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                            ‚îÇ
     ‚îÇ {username, password}        ‚îÇ                            ‚îÇ
     ‚îÇ                             ‚îÇ Find user                  ‚îÇ
     ‚îÇ                             ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
     ‚îÇ                             ‚îÇ                            ‚îÇ
     ‚îÇ                             ‚îÇ bcrypt.compare()           ‚îÇ
     ‚îÇ                             ‚îÇ ‚úÖ Match!                  ‚îÇ
     ‚îÇ                             ‚îÇ                            ‚îÇ
     ‚îÇ                             ‚îÇ Save session               ‚îÇ
     ‚îÇ                             ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
     ‚îÇ                             ‚îÇ {user: {...}, cookie: {}}  ‚îÇ
     ‚îÇ                             ‚îÇ                            ‚îÇ
     ‚îÇ Set-Cookie: sessionId=abc   ‚îÇ                            ‚îÇ
     ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                            ‚îÇ
     ‚îÇ                             ‚îÇ                            ‚îÇ
     ‚îÇ GET /api/bookings           ‚îÇ                            ‚îÇ
     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                            ‚îÇ
     ‚îÇ Cookie: sessionId=abc       ‚îÇ                            ‚îÇ
     ‚îÇ                             ‚îÇ Find session by ID         ‚îÇ
     ‚îÇ                             ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
     ‚îÇ                             ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
     ‚îÇ                             ‚îÇ {user: {role: "admin"}}    ‚îÇ
     ‚îÇ                             ‚îÇ                            ‚îÇ
     ‚îÇ                             ‚îÇ isAuthenticated ‚úÖ         ‚îÇ
     ‚îÇ                             ‚îÇ ‚Üí next()                   ‚îÇ
     ‚îÇ                             ‚îÇ                            ‚îÇ
     ‚îÇ 200 OK [{booking1}, ...]    ‚îÇ                            ‚îÇ
     ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                            ‚îÇ
```

---

## 9Ô∏è‚É£ PROTECTED ROUTES - –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

**–§–∞–π–ª:** [server.js](server.js) **—Å—Ç—Ä–æ–∫–∏ 642, 717, 810**

### –ö–æ–¥:
```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ - –ª—é–±–æ–π –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–π
app.post('/api/bookings', isAuthenticated, async (req, res) => {
  // created_by = req.session.user.username
  ...
});

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ - —Ç–æ–ª—å–∫–æ ADMIN
app.put('/api/bookings/:id', isAdmin, async (req, res) => {
  // updated_by = req.session.user.username
  ...
});

// –£–¥–∞–ª–µ–Ω–∏–µ - —Ç–æ–ª—å–∫–æ ADMIN
app.delete('/api/bookings/:id', isAdmin, async (req, res) => {
  ...
});
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

**–†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤:**
- `POST` (—Å–æ–∑–¥–∞–Ω–∏–µ) ‚Üí `isAuthenticated` ‚Üí admin –ò manager
- `PUT` (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) ‚Üí `isAdmin` ‚Üí —Ç–æ–ª—å–∫–æ admin
- `DELETE` (—É–¥–∞–ª–µ–Ω–∏–µ) ‚Üí `isAdmin` ‚Üí —Ç–æ–ª—å–∫–æ admin
- `GET` (—á—Ç–µ–Ω–∏–µ) ‚Üí –±–µ–∑ middleware ‚Üí –≤—Å–µ (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)

**Audit trail:**
```javascript
{
  ...bookingData,
  created_at: new Date(),
  created_by: req.session.user.username,  // ‚Üê –ö—Ç–æ —Å–æ–∑–¥–∞–ª
  updated_at: new Date(),
  updated_by: req.session.user.username   // ‚Üê –ö—Ç–æ –æ–±–Ω–æ–≤–∏–ª
}
```

---

## üîü –ü–†–û–í–ï–†–ö–ê –†–û–õ–ò –ü–†–ò –†–ê–ó–î–ï–õ–ï–ù–ù–û–ú –õ–û–ì–ò–ù–ï

**–§–∞–π–ª:** [server.js](server.js) **—Å—Ç—Ä–æ–∫–∏ 228-235 –∏ 298-305**

### –ö–æ–¥:
```javascript
// Admin Login
app.post('/admin/login', async (req, res) => {
  ...
  // –ü–†–û–í–ï–†–ö–ê: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –î–û–õ–ñ–ï–ù –±—ã—Ç—å –∞–¥–º–∏–Ω–æ–º
  if (user.role !== 'admin') {
    return res.status(403).json({ 
      error: 'Access denied. Admin privileges required.',
      hint: 'Please use the User Login page'
    });
  }
  ...
});

// User Login
app.post('/user/login', async (req, res) => {
  ...
  // –ü–†–û–í–ï–†–ö–ê: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–æ–º
  if (user.role === 'admin') {
    return res.status(403).json({ 
      error: 'Access denied. Please use Admin Login.',
      hint: 'Administrators must login through /admin'
    });
  }
  ...
});
```

### üìñ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

**–ó–∞—á–µ–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ:**
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç–æ—á–µ–∫ –≤—Ö–æ–¥–∞
- –†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—Ö–æ–¥–∞
- –õ—É—á—à–∏–π UX (–ø–æ–Ω—è—Ç–Ω–æ –∫—É–¥–∞ –∑–∞—Ö–æ–¥–∏—Ç—å)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. Manager –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–π—Ç–∏ —á–µ—Ä–µ–∑ `/admin` ‚Üí 403 + –ø–æ–¥—Å–∫–∞–∑–∫–∞
2. Admin –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–π—Ç–∏ —á–µ—Ä–µ–∑ `/user` ‚Üí 403 + –ø–æ–¥—Å–∫–∞–∑–∫–∞
3. –ö–∞–∂–¥—ã–π –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π endpoint

---

## ‚úÖ –ö–õ–Æ–ß–ï–í–´–ï –ú–û–ú–ï–ù–¢–´ –î–õ–Ø –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–ò

### 1. –ü–æ–∫–∞–∑–∞—Ç—å Cookie –≤ DevTools:
```
Application ‚Üí Cookies ‚Üí http://localhost:3000
- Name: sessionId
- Value: vF3k9mL2pQ1... (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
- HttpOnly: ‚úÖ (–≥–∞–ª–æ—á–∫–∞)
- Secure: depends on environment
- SameSite: Lax/Strict
```

### 2. –ü–æ–∫–∞–∑–∞—Ç—å Session –≤ MongoDB:
```
use assignment3
db.sessions.findOne()

–†–µ–∑—É–ª—å—Ç–∞—Ç:
{
  _id: "vF3k9mL2pQ1...",
  session: {
    cookie: {...},
    user: {username: "admin", role: "admin"}
  },
  expires: ISODate(...)
}
```

### 3. –ü–æ–∫–∞–∑–∞—Ç—å Hashed Password:
```
db.users.findOne({username: "admin"})

password: "$2b$10$N9qo8uLOXVOAkOdCfOYNueshI3SL0SqEhZzMNBxvl.hN2RBhqMfai"
          ‚Üë –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å "admin123" –æ–±—Ä–∞—Ç–Ω–æ!
```

### 4. –ü–æ–∫–∞–∑–∞—Ç—å Protected Route:
```
1. Logout (session destroyed)
2. Try: POST /api/bookings
3. Result: 401 Unauthorized
4. Login again
5. Try: POST /api/bookings
6. Result: 201 Created ‚úÖ
```

---

## üéØ –ë–´–°–¢–†–´–ï –û–¢–í–ï–¢–´ –ù–ê –í–û–ü–†–û–°–´

**Q: –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–µ—Å—Å–∏–∏?**
A: –í MongoDB, –∫–æ–ª–ª–µ–∫—Ü–∏—è 'sessions', TTL 24 —á–∞—Å–∞

**Q: –ß—Ç–æ –≤ cookie?**
A: –¢–æ–ª—å–∫–æ session ID (–¥–ª–∏–Ω–Ω–∞—è —Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞), –ù–ï –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Q: –ü–æ—á–µ–º—É HttpOnly?**
A: JavaScript –Ω–µ –º–æ–∂–µ—Ç —É–∫—Ä–∞—Å—Ç—å cookie —á–µ—Ä–µ–∑ XSS –∞—Ç–∞–∫—É

**Q: –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å?**
A: bcrypt.compare() —Ö–µ—à–∏—Ä—É–µ—Ç –≤–≤–µ–¥–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º —Ö–µ—à–µ–º

**Q: –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å –∏–∑ —Ö–µ—à–∞?**
A: –ù–µ—Ç, bcrypt - –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è, –Ω–µ–æ–±—Ä–∞—Ç–∏–º–∞—è

**Q: –†–∞–∑–Ω–∏—Ü–∞ isAuthenticated –∏ isAdmin?**
A: isAuthenticated –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ª–æ–≥–∏–Ω–µ–Ω –ª–∏, isAdmin –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª—å

**Q: –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ logout?**
A: –°–µ—Å—Å–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ MongoDB, cookie —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞

---

## üìö –§–ê–ô–õ–´ –î–õ–Ø –ò–ó–£–ß–ï–ù–ò–Ø

1. **[server.js](server.js)** - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (—Å—Ç—Ä–æ–∫–∏ 18-43, 48-85, 203-350)
2. **[init-users.js](init-users.js)** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å bcrypt
3. **[admin-dashboard.html](views/admin-dashboard.html)** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (—Å—Ç—Ä–æ–∫–∏ 337-355, 435-445)

---

**üéì –£–¥–∞—á–∏ –Ω–∞ –∑–∞—â–∏—Ç–µ! –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é.**
